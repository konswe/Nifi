# Generator zdarzeń
Celem projektu jest tworzenie zdarzeń (JSON) w NiFi i przesyłanie je do tabeli w postgresie - małe zapoznanie się z NiFi
## 1. Stworzenie tabeli w PG
```
CREATE TABLE projekt1.generator_wydarzen (
id uuid PRIMARY KEY,
ts timestamptz NOT NULL,
tekst text,
wartosc integer,
notatka text
);
```
Przez adminer zrobiłem nowy schemat do projektu i dodałem tabelę - uzupełnieniem jej zajmię się już NiFi
## 2. Stworzenie Controller Services
### DBCPConnectionPool
<img width="841" height="517" alt="image" src="https://github.com/user-attachments/assets/836a9c29-fe7b-42ef-a5b7-af1952dca0c7" />

Interesuje nas tak naprawdę pięć pól
1. Database Connection URL ```jdbc:postgresql://postgres:5432/pgdb?sslmode=disable&currentSchema=projekt1```
  - postgres - hostname serwera PG
  - 5432 - port
  - pgdb - nazwa bazy danych
  - sslmode=disable - połączenie bez SSL
  - currentSchema - schemat z naszą tabelą
2. Database Driver Class Name ```org.postgresql.Driver```
  - nazwa klasy sterownika
3. Database Driver Location(s) ```org.postgresql.Driver```
  - lokalizacja sterownika dostępna dla NiFi - [przeze mnie używany](https://repo1.maven.org/maven2/org/postgresql/postgresql/42.7.4/postgresql-42.7.4.jar)
  4. Database User
  5. Password
### JsonTreeReader 
<img width="845" height="638" alt="image" src="https://github.com/user-attachments/assets/08994562-1b4d-447f-8160-90d661d27e14" />

Tutaj dwa
  1. Schema Access Strategy
   - podajemy skąd dostanie informacje
  2. Schema Text
```
  {
  "type":"record","name":"Wydarzenie","fields":[
    {"name":"id","type":"string"},
    {"name":"ts","type":{"type":"long","logicalType":"timestamp-millis"}},
    {"name":"tekst","type":["null","string"],"default":null},
    {"name":"wartosc","type":["null","int"],"default":null},
    {"name":"notatka","type":["null","string"],"default":null}]
  }
```
  - w jakiej formie będą
     

